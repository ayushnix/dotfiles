##################################################
# DNSCRYPT-PROXY CONFIGURATION FOR VERSION 2.1.0 #
##################################################

server_names = [
    '{{ .dnscrypt_server_1 }}',
    '{{ .dnscrypt_server_2 }}', 
    '{{ .dnscrypt_server_3 }}'
]
listen_addresses = ['127.0.0.1:53']
max_clients = 250
# user_name = 'nobody'
ipv4_servers = true
ipv6_servers = false
dnscrypt_servers = true
doh_servers = true
odoh_servers = false
require_dnssec = true
require_nolog = true
require_nofilter = false
disabled_server_names = []
force_tcp = false
# proxy = 'socks5://127.0.0.1:9050'
# http_proxy = 'http://127.0.0.1:8888'
timeout = 5000
keepalive = 30
# edns_client_subnet = ["0.0.0.0/0", "2001:db8::/32"]
# blocked_query_response = 'refused'
# lb_strategy = 'p2'
# lb_estimator = true

##################################################

log_level = 2
# log_file = '/var/log/dnscrypt-proxy/dnscrypt-proxy.log'
# log_file_latest = true
use_syslog = true
log_files_max_size = 10
log_files_max_age = 14
log_files_max_backups = 1

##################################################

cert_refresh_delay = 240
# dnscrypt_ephemeral_keys = false
tls_disable_session_tickets = true
# tls_cipher_suite = [52392, 49199]

##################################################

bootstrap_resolvers = ['9.9.9.9:53', '8.8.8.8:53']
ignore_system_dns = true

##################################################

netprobe_timeout = 60
netprobe_address = '9.9.9.9:53'
# offline_mode = false
# query_meta = ['key1:value1', 'key2:value2', 'token:MySecretToken']

##################################################

block_ipv6 = true
block_unqualified = true
block_undelegated = true
reject_ttl = 600

##################################################

# forwarding_rules = '/etc/dnscrypt-proxy/forwarding-rules.txt'

##################################################

cloaking_rules = '/etc/dnscrypt-proxy/cloaking-rules.txt'
cloak_ttl = 600

##################################################

cache = true
cache_size = 4096
cache_min_ttl = 2400
cache_max_ttl = 86400
cache_neg_min_ttl = 60
cache_neg_max_ttl = 600

##################################################

[captive_portals]
# map_file = '/etc/dnscrypt-proxy/example-captive-portals.txt'

##################################################

[local_doh]
# listen_addresses = ['127.0.0.1:3000']
# path = '/dns-query'
# cert_file = '/var/lib/dnscrypt-proxy/localhost.pem'
# cert_key_file = '/var/lib/dnscrypt-proxy/localhost.pem'

##################################################

[query_log]
  # file = '/var/log/dnscrypt-proxy/query.log'
  # format = 'tsv'
  # ignored_qtypes = ['DNSKEY', 'NS']

##################################################

[nx_log]
  file = '/var/log/dnscrypt-proxy/nx.log'
  format = 'tsv'

##################################################

[blocked_names]
  blocked_names_file = '/etc/dnscrypt-proxy/blocked-names.txt'
  log_file = '/var/log/dnscrypt-proxy/blocked-names.log'
  log_format = 'tsv'

##################################################

[blocked_ips]
  blocked_ips_file = '/etc/dnscrypt-proxy/blocked-ips.txt'
  log_file = '/var/log/dnscrypt-proxy/blocked-ips.log'
  log_format = 'tsv'

##################################################

[allowed_names]
  # allowed_names_file = '/etc/dnscrypt-proxy/allowed-names.txt'
  # log_file = '/var/log/dnscrypt-proxy/allowed-names.log'
  # log_format = 'tsv'

##################################################

[allowed_ips]
  # allowed_ips_file = '/etc/dnscrypt-proxy/allowed-ips.txt'
  # log_file = '/var/log/dnscrypt-proxy/allowed-ips.log'
  # log_format = 'tsv'

#################################################

[schedules]
  # [schedules.'time-to-sleep']
  # mon = [{after='21:00', before='7:00'}]
  # tue = [{after='21:00', before='7:00'}]
  # wed = [{after='21:00', before='7:00'}]
  # thu = [{after='21:00', before='7:00'}]
  # fri = [{after='23:00', before='7:00'}]
  # sat = [{after='23:00', before='7:00'}]
  # sun = [{after='21:00', before='7:00'}]

  # [schedules.'work']
  # mon = [{after='9:00', before='18:00'}]
  # tue = [{after='9:00', before='18:00'}]
  # wed = [{after='9:00', before='18:00'}]
  # thu = [{after='9:00', before='18:00'}]
  # fri = [{after='9:00', before='17:00'}]

##################################################

[sources]
  [sources.'public-resolvers']
    urls = [
        'https://raw.githubusercontent.com/DNSCrypt/dnscrypt-resolvers/master/v3/public-resolvers.md',
        'https://download.dnscrypt.info/resolvers-list/v3/public-resolvers.md',
        'https://ipv6.download.dnscrypt.info/resolvers-list/v3/public-resolvers.md',
        'https://download.dnscrypt.net/resolvers-list/v3/public-resolvers.md'
    ]
    cache_file = '/var/cache/dnscrypt-proxy/public-resolvers.md'
    minisign_key = 'RWQf6LRCGA9i53mlYecO4IzT51TGPpvWucNSCh1CBM0QTaLn73Y7GFO3'
    refresh_delay = 72
    prefix = ''

# [sources.'relays']
#   urls = [
#       'https://raw.githubusercontent.com/DNSCrypt/dnscrypt-resolvers/master/v3/relays.md',
#       'https://download.dnscrypt.info/resolvers-list/v3/relays.md',
#       'https://ipv6.download.dnscrypt.info/resolvers-list/v3/relays.md',
#       'https://download.dnscrypt.net/resolvers-list/v3/relays.md'
#   ]
#   cache_file = '/var/cache/dnscrypt-proxy/relays.md'
#   minisign_key = 'RWQf6LRCGA9i53mlYecO4IzT51TGPpvWucNSCh1CBM0QTaLn73Y7GFO3'
#   refresh_delay = 72
#   prefix = ''

# [sources.'odoh-servers']
#   urls = [
#       'https://raw.githubusercontent.com/DNSCrypt/dnscrypt-resolvers/master/v3/odoh-servers.md', 
#       'https://download.dnscrypt.info/resolvers-list/v3/odoh-servers.md',
#       'https://ipv6.download.dnscrypt.info/resolvers-list/v3/odoh-servers.md',
#       'https://download.dnscrypt.net/resolvers-list/v3/odoh-servers.md'
#   ]
#   cache_file = '/var/cache/dnscrypt-proxy/odoh-servers.md'
#   minisign_key = 'RWQf6LRCGA9i53mlYecO4IzT51TGPpvWucNSCh1CBM0QTaLn73Y7GFO3'
#   refresh_delay = 24
#   prefix = ''

# [sources.'odoh-relays']
#   urls = [
#       'https://raw.githubusercontent.com/DNSCrypt/dnscrypt-resolvers/master/v3/odoh-relays.md', 
#       'https://download.dnscrypt.info/resolvers-list/v3/odoh-relays.md',
#       'https://ipv6.download.dnscrypt.info/resolvers-list/v3/odoh-relays.md',
#       'https://download.dnscrypt.net/resolvers-list/v3/odoh-relays.md'
#   ]
#   cache_file = '/var/cache/dnscrypt-proxy/odoh-relays.md'
#   minisign_key = 'RWQf6LRCGA9i53mlYecO4IzT51TGPpvWucNSCh1CBM0QTaLn73Y7GFO3'
#   refresh_delay = 24
#   prefix = ''

# [sources.quad9-resolvers]
#   urls = ['https://www.quad9.net/quad9-resolvers.md']
#   minisign_key = 'RWQBphd2+f6eiAqBsvDZEBXBGHQBJfeG6G+wJPPKxCZMoEQYpmoysKUN'
#   cache_file = '/var/cache/dnscrypt-proxy/quad9-resolvers.md'
#   prefix = 'quad9-'

# [sources.'parental-control']
#   urls = [
#       'https://raw.githubusercontent.com/DNSCrypt/dnscrypt-resolvers/master/v3/parental-control.md',
#       'https://download.dnscrypt.info/resolvers-list/v3/parental-control.md',
#       'https://ipv6.download.dnscrypt.info/resolvers-list/v3/parental-control.md',
#       'https://download.dnscrypt.net/resolvers-list/v3/parental-control.md'
#   ]
#   cache_file = '/var/cache/dnscrypt-proxy/parental-control.md'
#   minisign_key = 'RWQf6LRCGA9i53mlYecO4IzT51TGPpvWucNSCh1CBM0QTaLn73Y7GFO3'

##################################################

[broken_implementations]
fragments_blocked = [
    'cisco', 'cisco-ipv6', 'cisco-familyshield', 
    'cisco-familyshield-ipv6', 'cleanbrowsing-adult',
    'cleanbrowsing-adult-ipv6', 'cleanbrowsing-family',
    'cleanbrowsing-family-ipv6', 'cleanbrowsing-security',
    'cleanbrowsing-security-ipv6'
]

##################################################

[doh_client_x509_auth]
# creds = [
#    { server_name='*', client_cert='client.crt', client_key='client.key' }
# ]

##################################################

[anonymized_dns]
# routes = [
#    { server_name='example-server-1', via=['anon-example-1', 'anon-example-2'] },
#    { server_name='example-server-2', via=['sdns://gRIxMzcuNzQuMjIzLjIzNDo0NDM'] }
# ]
# skip_incompatible = false
# direct_cert_fallback = false

##################################################

[dns64]
# prefix = ['64:ff9b::/96']
# resolver = ['[2606:4700:4700::64]:53', '[2001:4860:4860::64]:53']

##################################################

[static]
  [static.'gc-bom-nextdns']
  stamp = 'sdns://AgcAAAAAAAAADDM0LjkzLjE2NC4yMgAYZ2MtYm9tLTEuZWRnZS5uZXh0ZG5zLmlvCi9kbnMtcXVlcnk'
  [static.'ls-bom-nextdns']
  stamp = 'sdns://AgcAAAAAAAAADzEwMy4xNTAuMTg3LjEwOAAYbHMtYm9tLTEuZWRnZS5uZXh0ZG5zLmlvCi9kbnMtcXVlcnk'
  [static.'do-blr-1']
  stamp = 'sdns://AgcAAAAAAAAADTY4LjE4My45MS4yNDMAGGRvLWJsci0xLmVkZ2UubmV4dGRucy5pbwovZG5zLXF1ZXJ5'
  [static.'microhost-del-1']
  stamp = 'sdns://AgcAAAAAAAAADjEwMy4xMjcuMjkuMTk4AB9taWNyb2hvc3QtZGVsLTEuZWRnZS5uZXh0ZG5zLmlvCi9kbnMtcXVlcnk'

##################################################
